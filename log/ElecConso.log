Warning issue with delta calculation
Warning issue with delta calculation
Error Homewizard P1 not reachable please take action
Traceback (most recent call last):
  File "/usr/lib/python3.9/urllib/request.py", line 1346, in do_open
    h.request(req.get_method(), req.selector, req.data, headers,
  File "/usr/lib/python3.9/http/client.py", line 1255, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib/python3.9/http/client.py", line 1301, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.9/http/client.py", line 1250, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib/python3.9/http/client.py", line 1010, in _send_output
    self.send(msg)
  File "/usr/lib/python3.9/http/client.py", line 950, in send
    self.connect()
  File "/usr/lib/python3.9/http/client.py", line 921, in connect
    self.sock = self._create_connection(
  File "/usr/lib/python3.9/socket.py", line 843, in create_connection
    raise err
  File "/usr/lib/python3.9/socket.py", line 831, in create_connection
    sock.connect(sa)
OSError: [Errno 101] Network is unreachable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/NewConso/ElecConso.py", line 122, in read_homewizard_P1
    response = urllib.request.urlopen(counter)
  File "/usr/lib/python3.9/urllib/request.py", line 214, in urlopen
    return opener.open(url, data, timeout)
  File "/usr/lib/python3.9/urllib/request.py", line 517, in open
    response = self._open(req, data)
  File "/usr/lib/python3.9/urllib/request.py", line 534, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.9/urllib/request.py", line 494, in _call_chain
    result = func(*args)
  File "/usr/lib/python3.9/urllib/request.py", line 1375, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File "/usr/lib/python3.9/urllib/request.py", line 1349, in do_open
    raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 101] Network is unreachable>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/NewConso/ElecConso.py", line 138, in read_homewizard_P1
    log('Homewizard P1 not reachable please take action','error')
  File "/home/pi/NewConso/ElecConso.py", line 115, in log
    send_mail('rpi@one2care.be', 'bruno.faucon@one2care.be', 'Alerte Raspberry', message)
  File "/home/pi/NewConso/SendMail.py", line 51, in send_mail
    mailserver = smtplib.SMTP(EMAIL_SMTP, EMAIL_PORT)
  File "/usr/lib/python3.9/smtplib.py", line 253, in __init__
    (code, msg) = self.connect(host, port)
  File "/usr/lib/python3.9/smtplib.py", line 339, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/lib/python3.9/smtplib.py", line 310, in _get_socket
    return socket.create_connection((host, port), timeout,
  File "/usr/lib/python3.9/socket.py", line 822, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
  File "/usr/lib/python3.9/socket.py", line 953, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
socket.gaierror: [Errno -3] Temporary failure in name resolution

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/pi/NewConso/ElecConso.py", line 253, in <module>
    counters3 = read_homewizard_P1(counter3)
  File "/home/pi/NewConso/ElecConso.py", line 145, in read_homewizard_P1
    return active_power_w, total_power_import_t1_kwh, total_power_import_t2_kwh, total_power_export_t1_kwh, total_power_export_t2_kwh
UnboundLocalError: local variable 'active_power_w' referenced before assignment
Warning issue with delta calculation
Traceback (most recent call last):
  File "/home/pi/NewConso/ElecConso.py", line 256, in <module>
    last_production = counters1[0]+counters2[0]
TypeError: can only concatenate str (not "int") to str
